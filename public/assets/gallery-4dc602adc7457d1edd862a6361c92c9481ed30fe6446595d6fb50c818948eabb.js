function initPhotos(){window.PhotoImageSourceList=JSON.parse(document.querySelector("#photosData").value),window.FloorplanImageSourceList=JSON.parse(document.querySelector("#floorplansData").value)}function preloadImages(){function e(e,l){setTimeout(function(){var t=new Image;l&&(t.onload=l),t.src=e},0)}for(var l,t=PhotoImageSourceList.concat(FloorplanImageSourceList),o=0;l=t[o++];)e(l.xsmall),e(l.small),e(l.medium),e(l.large),e(l.xlarge)}function debounce(e,l,t,o){var r;return function(){var a=arguments;o=o||this;var i=function(){r=null,t||e.apply(o,a)},n=t&&!r;clearTimeout(r),r=setTimeout(i,l),n&&e.apply(o,a)}}var IsMobile=/Mobi/i.test(navigator.userAgent);IsMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),IsMobile&&document.querySelector("html").classList.add("mobile"),$(document).on("ready",initPhotos);var heroGallery=function(){function e(){l.gallery=$("#gallery"),l.galleryPrev=$("#gallery-prev"),l.galleryNext=$("#gallery-next"),l.galleryItemTemplate=l.gallery.find("> div.item-gallery.template"),l.galleryItemTemplate.remove(),l.gallery.slick({speed:200,dots:!0,infinite:!0,autoplaySpeed:5e3,prevArrow:"<button id='gallery-arrow-prev'><i class='fa fa-angle-left'></i></button>",nextArrow:"<button id='gallery-arrow-next'><i class='fa fa-angle-right'></i></button>"}),l.gallery.on("click","div.item-gallery",function(){var e=l.gallery.slick("slickCurrentSlide");fullGallery.open(e),thumbGallery.show()}),l.gallery.on("afterChange",function(){PageTrack.log(6)})}var l={};$(document).on("ready",e),$(window).on("load",function(){for(var e,t=1;e=PhotoImageSourceList[t++];){var o=l.galleryItemTemplate.clone();o.find("source.itemGalleryImgSource-xlarge").attr("srcset",e.xlarge),o.find("source.itemGalleryImgSource-large").attr("srcset",e.large),o.find("source.itemGalleryImgSource-medium").attr("srcset",e.medium),o.find("source.itemGalleryImgSource-small").attr("srcset",e.small),o.find("source.itemGalleryImgSource-xsmall").attr("srcset",e.xsmall),o.find("img.itemGalleryImgSource-default").on("load",function(){$(this).addClass("imgSmoothLoaded")}),l.gallery.slick("slickAdd",o)}})}(),fullGallery=function(){function e(){for(var e,l=PhotoImageSourceList.concat(FloorplanImageSourceList),t=0;e=l[t++];)u.push({xsmall:{src:e.xsmall},small:{src:e.small},medium:{src:e.medium},large:{src:e.large},xlarge:{src:e.xlarge}})}function l(){var e=window.innerWidth;return e<480?"small":e<768?"medium":e<992?"large":"xlarge"}function t(){e(),c.html=document.querySelector("html"),c.psDiv=document.querySelector("#fullGallery_Photoswipe"),c.psElement=c.psDiv.querySelector(".pswp"),$("[data-showfullgallery-index]").on("click",function(){r(+(this.getAttribute("data-showfullgallery-index")||0))})}function o(e){var t={index:e,closeOnScroll:!1,closeOnVerticalDrag:IsMobile,history:!1,preload:[1,1],showHideOpacity:!0};n=new PhotoSwipe(c.psElement,PhotoSwipeUI_Default,u,t),n.options.closeElClasses=[],n.options.clickToCloseNonZoomable=!1,n.listen("beforeResize",function(){var e=l();s!=e&&(s=e,n.invalidateCurrItems())}),n.listen("gettingData",function(e,l){var t=l[s];if(t.hasSize)l.src=t.src,l.w=t.w,l.h=t.h;else if(!t.hasInit){l.src="http://stage.propertyshowcase.com/Content/Property/11/img/dotsdark64x16.gif",l.w=64,l.h=16,t.hasInit=!0;var o=new Image;o.onload=function(){t.hasSize=!0,l.w=t.w=o.naturalWidth,l.h=t.h=o.naturalHeight,n.invalidateCurrItems(),n.updateSize(!0)},o.src=t.src}}),n.listen("close",function(){a(),PageTrack.log(18)}),n.listen("afterChange",function(){thumbGallery.gotoIndex(n.getCurrentIndex()),PageTrack.log(6)}),n.init()}function r(e){c.html.classList.add("showGalleryFullscreen"),thumbGallery.open(),o(e||0)}function a(){c.html.classList.remove("showGalleryFullscreen")}function i(e){n.goTo(e)}$(document).on("ready",t);var n,s,c={},u=[];return{open:r,gotoIndex:i}}(),thumbGallery=function(){function e(){s||(l(),s=!0)}function l(){n.gallery=document.querySelector("#thumbGalleryDiv"),n.itemList=n.gallery.querySelector("ul"),n.itemTemplate=n.itemList.querySelector(".thumbGalleryItem"),$(n.itemTemplate).remove();for(var e,l=PhotoImageSourceList.concat(FloorplanImageSourceList),t=0;e=l[t];t++){var r=n.itemTemplate.cloneNode(!0);r.setAttribute("data-thumbsgalleryindex",t),r.style.backgroundImage="url("+e.thumb+")",n.itemList.appendChild(r)}$(n.gallery).on("click tap",".thumbGalleryItem",function(){var e=+this.getAttribute("data-thumbsgalleryindex");fullGallery.gotoIndex(e),o(e)}),i=new IScroll(n.gallery,{scrollX:!0,scrollY:!1,mouseWheel:!0,snap:"li",tap:!0}),window.addEventListener("resize",debounce(function(){i.refresh()},200))}function t(e){i.goToPage(e,0,1e3),o(e)}function o(e){$(".thumbGalleryItem").removeClass("thumbGalleryCurrent"),$(".thumbGalleryItem[data-thumbsgalleryindex="+e+"]").addClass("thumbGalleryCurrent")}function r(){n.gallery=document.querySelector("#thumbGalleryDiv"),n.itemList=n.gallery.querySelector("ul"),n.itemTemplate=n.itemList.querySelector(".thumbGalleryItem"),n.gallery.classList.remove("showthumbnails"),n.gallery.classList.add("hidethumbnails")}function a(){n.gallery=document.querySelector("#thumbGalleryDiv"),n.itemList=n.gallery.querySelector("ul"),n.itemTemplate=n.itemList.querySelector(".thumbGalleryItem"),n.gallery.classList.remove("hidethumbnails"),n.gallery.classList.add("showthumbnails")}var i,n={},s=!1;return{open:e,gotoIndex:t,close:r,show:a}}(),opendvideo_3d=function(){function e(){i.html=document.querySelector("html"),i.psDiv=document.querySelector("#threeD_vid_Photoswipe"),i.psElement=i.psDiv.querySelector(".pswp"),$("[data-video-url]").on("click",function(){var e=this.getAttribute("data-video-url");n.push({video3dIframe:{html:'<iframe id="video3d-iframe" src="'+e+'" frameborder="0" allowscriptaccess="always" allowfullscreen></iframe></div>'}}),thumbGallery.close(),t()})}function l(e){var l={index:e,closeOnScroll:!1,closeOnVerticalDrag:IsMobile,history:!1,preload:[2,2],showHideOpacity:!0};a=new PhotoSwipe(i.psElement,PhotoSwipeUI_Default,n,l),a.options.closeElClasses=[],a.options.clickToCloseNonZoomable=!1,a.listen("gettingData",function(e,l){l.html=l.video3dIframe.html}),a.listen("close",function(){o()}),a.init()}function t(e){i.html.classList.add("showGalleryFullscreen"),l(e||0)}function o(){i.html.classList.remove("showGalleryFullscreen"),$("#video3d-iframe")[0].contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*")}function r(e){psgallery.goTo(e)}$(document).on("ready",e);var a,i={},n=[];return{open:t,gotoIndex:r}}(),opendiakrit=function(){function e(){i.html=document.querySelector("html"),i.psDiv=document.querySelector("#diakritGallery_Photoswipe"),i.psElement=i.psDiv.querySelector(".pswp"),$("[data-diakrit-url]").on("click",function(){var e=this.getAttribute("data-diakrit-url");n.push({diakritIframe:{html:'<iframe id="diakrit-iframe" src="'+e+'" frameborder="0" allowfullscreen></iframe></div>'}}),thumbGallery.close(),t()})}function l(e){var l={index:e,closeOnScroll:!1,closeOnVerticalDrag:IsMobile,history:!1,preload:[2,2],showHideOpacity:!0};a=new PhotoSwipe(i.psElement,PhotoSwipeUI_Default,n,l),a.options.closeElClasses=[],a.options.clickToCloseNonZoomable=!1,a.listen("gettingData",function(e,l){l.html=l.diakritIframe.html}),a.listen("close",function(){o()}),a.init()}function t(e){i.html.classList.add("showGalleryFullscreen"),l(e||0)}function o(){i.html.classList.remove("showGalleryFullscreen")}function r(e){psgallery.goTo(e)}$(document).on("ready",e);var a,i={},n=[];return{open:t,gotoIndex:r}}();